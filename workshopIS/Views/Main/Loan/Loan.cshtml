<div ng-app="workshopIS" ng-controller="LoanController" ng-init="onInit()">
    <div class="container">
        <div class="row text-center">
            <h2>New Loan</h2>
            <div class="col-xs-12 col-sm-6 col-md-6 loan-data leftscrollbar">
                <div>
                    <form name="form" ng-submit="onCreateLoan()" novalidate>
                        <div class="text-left">
                            <div class="hidden-lg hidden-md hidden-sm form-group">
                                <div calss="form-control">
                                    <h3>Partner</h3>
                                    <input list="testList2" ng-model="pName" ng-change="onPartnerSelected(pName)" />
                                </div>
                                <datalist id="testList2">
                                    <option ng-repeat="partner in models.partners" value="{{partner.name}}">
                                </datalist>
                                <hr ng-if="editedCustomer.partner" />
                             <div ng-if="!editedCustomer.partner" class="inp-msg-warn">
                                 <p>Please select a partner</p>
                            </div>
                                <div class="list-group-item clearfix text-left" ng-if="editedCustomer.partner">
                                    <div class="pull-left">
                                        <h3 class="list-group-item-heading">{{ selectedPartner.name }}</h3>
                                        <p class="list-group-item-text">ICO: {{selectedPartner.ico}}</p>
                                        <p class="list-group-item-text">Valid From: {{selectedPartner.validFrom | date:'mediumDate'}}</p>
                                        <p class="list-group-item-text">Valid To: {{selectedPartner.validTo || '∞' | date:'mediumDate'}}</p>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="icoInput">Loan amount</label>
                                <input type="number" class="form-control" id="icoInput" min="20000" step="100" max="500000"
                                       ng-model="currentLoan.amount" name="lAmount" required="" tester="amount" />
                                <div ng-show="form.$submitted || form.lAmount.$touched">
                                    <div class="inp-msg-err" ng-show="form.lAmount.$error.tester">Amount should be between 20,000 and 500,000 CZK.</div>
                                    <div class="inp-msg-err" ng-show="form.lAmount.$error.required">Amount is required.</div>
                                    @*<div ng-repeat="err in errors.lAmount.err" ng-show="form.lAmount.$error.required" class="inp-err-msg">{{ err }}</div>*@
                                    @*<div ng-repeat="warn in errors.lAmount.warn" ng-show="form.lAmount.$error.required" class="inp-err-msg">{{ warn }}</div>*@
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="validFInput">Loan duration (months)</label>
                                <input type="number" class="form-control" id="validFInput" min="6" step="2" max="96"
                                       ng-model="currentLoan.duration" name="lDuration" required tester="duration" />
                                <div ng-show="form.$submitted || form.lDuration.$touched">
                                    <div class="inp-msg-err" ng-show="form.lDuration.$error.tester">Duration should be between 6 and 96 months.</div>
                                    <div class="inp-msg-err" ng-show="form.lDuration.$error.required">Duration is required.</div>
                                    @*<div ng-repeat="err in errors.lDuration.err" ng-show="form.lDuration.$error.required" class="inp-err-msg">{{ err }}</div>*@
                                    @*<div ng-repeat="warn in errors.lDuration.warn" ng-show="form.lDuration.$error.required" class="inp-err-msg">{{ warn }}</div>*@
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="interestInput">Interest</label>
                                <input type="text" class="form-control" id="interestInput" min="0" step="0.05" max="1"
                                       ng-model="currentLoan.interest" name="lInterest" required tester="interest" />
                                <div ng-show="form.$submitted || form.lInterest.$touched">
                                    <div class="inp-msg-err" ng-show="form.lInterest.$error.tester">Interest should be between 0 and 1.</div>
                                    <div class="inp-msg-warn" ng-show="form.lInterest.$error.required">Interest will be set to 0.1</div>
                                    @*<div ng-repeat="err in errors.lInterest.err" ng-show="form.lInterest.$error.required" class="inp-err-msg">{{ err }}</div>
                                        <div ng-repeat="warn in errors.lInterest.warn" ng-show="form.lInterest.$error.required" class="inp-err-msg">{{ warn }}</div>*@
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="nameInput">Phone number</label>
                                <input type="text" class="form-control" id="nameInput"
                                       ng-model="editedCustomer.phone" name="uPhone" required tester="phone" />
                                <div ng-show="form.$submitted || form.uPhone.$touched">
                                    <div class="inp-msg-err" ng-show="form.uPhone.$error.tester">Not valid phone format.</div>
                                    <div class="inp-msg-err" ng-show="form.uPhone.$error.required">Phone number is required.</div>
                                    @*<div ng-repeat="err in errors.uPhone.err" ng-show="form.uPhone.$error.required" class="inp-err-msg">{{ err }}</div>*@
                                    @*<div ng-repeat="warn in errors.uPhone.warn" ng-show="form.uPhone.$error.required" class="inp-err-msg">{{ warn }}</div>*@
                                </div>
                            </div>
                            <hr />
                            <div class="form-group">
                                <label for="fnameInput">First name</label>
                                <input type="text" class="form-control" id="fnameInput" name="uName" ng-model="editedCustomer.firstName" tester="name" />
                                <div ng-show="form.$submitted || form.uName.$touched">
                                    <div class="inp-msg-warn" ng-show="form.uName.$error.tester">Name isn't valid.</div>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="snameInput">Surname</label>
                                <input type="text" class="form-control" id="snameInput" name="uSurname" ng-model="editedCustomer.surname" tester="name" />
                                <div ng-show="form.$submitted || form.uSurname.$touched">
                                    <div class="inp-msg-warn" ng-show="form.uSurname.$error.tester">Surname isn't valid.</div>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="emailInput">Email</label>
                                <input type="text" class="form-control" id="emailInput" name="uEmail" ng-model="editedCustomer.email" tester="email" />
                                <div ng-show="form.$submitted || form.uEmail.$touched">
                                    <div class="inp-msg-warn" ng-show="form.uEmail.$error.tester">Invalid email.</div>
                                </div>
                                <div class="form-group">
                                    <label for="noteInput">Note</label>
                                    <input type="text" class="form-control" id="noteInput" ng-model="editedCustomer.note" />
                                </div>

                                <button type="submit" class="btn btn-success">Confirm</button>
                                <button type="button" class="btn btn-primary" ng-click="onEditCanceled()">Cancel</button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
            <div class="hidden-xs col-sm-6 col-md-6 text-center" style="height: 75vh; overflow-y: scroll;">
                <div calss="form-control">
                    <h3>Partner</h3>
                    <input list="testList" ng-model="pName" ng-change="onPartnerSelected(pName)" />
                </div>
                <datalist id="testList">
                    <option ng-repeat="partner in models.partners" value="{{partner.name}}">
                </datalist>
                <hr ng-if="editedCustomer.partner" />
                <div ng-if="!editedCustomer.partner" class="inp-msg-warn">
                    <p>Please select a partner</p>
                </div>
                <div class="list-group-item clearfix text-left" ng-if="editedCustomer.partner">
                    <div class="pull-left">
                        <h3 class="list-group-item-heading">{{ selectedPartner.name }}</h3>
                        <p class="list-group-item-text">ICO: {{selectedPartner.ico}}</p>
                        <p class="list-group-item-text">Valid From: {{selectedPartner.validFrom | date:'mediumDate'}}</p>
                        <p class="list-group-item-text">Valid To: {{selectedPartner.validTo || '∞' | date:'mediumDate'}}</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>